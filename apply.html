<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>قدّم طلبك | درب | Path</title>
  <meta name="theme-color" content="#1a2332">

  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* ✅ ألوان قريبة من هوية درب PATH (Navy/Copper/Off-white)
         لو تبغى ترجع لألوانك القديمة، رجّع القيم السابقة */
      --primary: #1a2332;      /* navy */
      --secondary: #c9974d;    /* copper */
      --cream: #f8f6f3;        /* off-white */
      --light-cream: #ffffff;
      --white: #ffffff;
      --text: #1a2332;
      --text-light: rgba(26,35,50,.74);
      --border: rgba(26,35,50,.14);
      --shadow: 0 18px 55px rgba(26,35,50,.14);
      --radius: 14px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      background: radial-gradient(900px 520px at 20% 0%, rgba(201,151,77,.16), transparent 55%),
                  radial-gradient(900px 520px at 80% 10%, rgba(26,35,50,.10), transparent 55%),
                  var(--cream);
      color: var(--text);
      line-height: 1.7;
      min-height: 100vh;
    }

    h1, h2, h3 {
      font-family: 'Amiri', serif;
      color: var(--primary);
    }

    a { color: inherit; text-decoration: none; }

    /* Language Toggle */
    .lang-toggle {
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 100;
      background: rgba(26,35,50,.92);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 6px;
      display: flex;
      gap: 4px;
      box-shadow: 0 10px 30px rgba(26,35,50,.25);
      backdrop-filter: blur(8px);
    }

    .lang-toggle button {
      padding: 8px 14px;
      border: none;
      background: transparent;
      color: rgba(255,255,255,.72);
      cursor: pointer;
      border-radius: 10px;
      font-weight: 700;
      transition: .2s;
      font-size: 0.9em;
      font-family: 'IBM Plex Sans Arabic', sans-serif;
    }

    .lang-toggle button.active {
      background: rgba(201,151,77,.95);
      color: #141a24;
    }

    .lang-ar { display: block; }
    .lang-en { display: none; }
    body.en-mode .lang-ar { display: none; }
    body.en-mode .lang-en { display: block; }
    span.lang-ar { display: inline; }
    span.lang-en { display: none; }
    body.en-mode span.lang-ar { display: none; }
    body.en-mode span.lang-en { display: inline; }

    /* Header */
    .header {
      background: rgba(26,35,50,.96);
      padding: 2em 0;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }

    .logo-link {
      display: flex;
      align-items: center;
      gap: 14px;
      color: var(--white);
      transition: .2s;
    }

    /* ✅ بدل الحركة يمين/يسار (تتلخبط مع RTL/LTR)، نخليها حركة لطيفة للأعلى */
    .logo-link:hover { transform: translateY(-2px); }

    .logo-link img {
      width: 50px;
      height: 50px;
      border-radius: 14px;
      background: rgba(255,255,255,.96);
      padding: 8px;
      border: 1px solid rgba(201,151,77,.35);
    }

    .logo-text b {
      display: block;
      font-size: 1.2em;
      letter-spacing: .5px;
    }

    .logo-text span {
      font-size: 0.85em;
      opacity: .82;
      display: block;
      margin-top: 2px;
    }

    .back-btn {
      padding: 10px 20px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 12px;
      color: var(--white);
      font-weight: 700;
      transition: .2s;
      font-family: 'IBM Plex Sans Arabic', sans-serif;
    }

    .back-btn:hover {
      background: rgba(255,255,255,.14);
      transform: translateY(-2px);
    }

    /* Main Section */
    .main-section {
      padding: 4em 0;
      min-height: calc(100vh - 200px);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .form-header {
      text-align: center;
      margin-bottom: 2.2em;
    }

    .form-title {
      font-size: 2.4em;
      margin-bottom: 0.5em;
      letter-spacing: .3px;
    }

    .form-subtitle {
      color: var(--text-light);
      font-size: 1.05em;
      line-height: 2;
      max-width: 740px;
      margin: 0 auto;
    }

    /* Google Form */
    .form-embed {
      background: var(--white);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }

    /* ✅ Loader */
    .form-loader {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 12px;
      background: linear-gradient(180deg, rgba(248,246,243,.92), rgba(248,246,243,.70));
      z-index: 2;
      transition: opacity .25s ease;
    }
    .form-loader.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .spinner {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 3px solid rgba(26,35,50,.18);
      border-top-color: rgba(201,151,77,.95);
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .form-loader p {
      color: var(--text-light);
      font-weight: 700;
      margin: 0;
      text-align: center;
      padding: 0 14px;
    }

    .google-form-iframe {
      width: 100%;
      /* ✅ Responsive height بدل 2400px */
      height: min(82vh, 1350px);
      min-height: 820px;
      border: none;
      display: block;
      background: #fff;
    }

    /* Info Box */
    .info-box {
      background: rgba(201,151,77,.10);
      border: 1px solid rgba(201,151,77,.28);
      border-radius: 18px;
      padding: 2em;
      margin-top: 2.2em;
      text-align: center;
      box-shadow: 0 12px 40px rgba(26,35,50,.08);
    }

    .info-box h4 {
      color: var(--primary);
      margin-bottom: 0.8em;
      font-size: 1.2em;
      font-family: 'Amiri', serif;
    }

    .info-box p {
      color: var(--text-light);
      line-height: 2;
      margin-bottom: 0.5em;
    }

    .info-box a {
      color: var(--primary);
      font-weight: 800;
      text-decoration: underline;
    }

    .btn-open-form {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 22px;
      background: rgba(201,151,77,.95);
      color: #141a24;
      border-radius: 12px;
      font-weight: 800;
      margin-top: 1em;
      box-shadow: 0 10px 30px rgba(26,35,50,.18);
      transition: .2s;
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      border: 1px solid rgba(201,151,77,.55);
    }

    .btn-open-form:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 38px rgba(26,35,50,.22);
    }

    /* Footer */
    footer {
      background: rgba(26,35,50,.96);
      padding: 2.2em 0;
      color: rgba(255,255,255,.88);
      border-top: 1px solid rgba(255,255,255,.10);
      text-align: center;
      margin-top: 2.2em;
    }

    footer a {
      color: rgba(201,151,77,.95);
      text-decoration: underline;
      font-weight: 800;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .lang-toggle { top: 10px; left: 10px; }
      .header-inner { flex-direction: column; text-align: center; }
      .logo-text span { display: none; }
      .form-title { font-size: 2em; }
      .google-form-iframe { height: 78vh; min-height: 760px; }
    }

    body.en-mode { direction: ltr; }
  </style>
</head>

<body>

  <div class="lang-toggle">
    <button onclick="setLang('ar')" class="active" id="lang-ar">العربية</button>
    <button onclick="setLang('en')" id="lang-en">English</button>
  </div>

  <header class="header">
    <div class="header-inner">
      <a href="index.html" class="logo-link" aria-label="العودة للرئيسية">
        <img src="logo.png" alt="شعار درب">
        <div class="logo-text">
          <b>
            <span class="lang-ar">درب | Path</span>
            <span class="lang-en">Path | درب</span>
          </b>
          <span>
            <span class="lang-ar">طريق واحد. ثقافات متعددة. لغة واحدة.</span>
            <span class="lang-en">One Path. Many Cultures. One Language.</span>
          </span>
        </div>
      </a>

      <a href="index.html" class="back-btn">
        <span class="lang-ar">العودة للرئيسية</span>
        <span class="lang-en">Back to Home</span>
      </a>
    </div>
  </header>

  <section class="main-section">
    <div class="container">

      <div class="form-header">
        <h1 class="form-title lang-ar">قدّم طلبك للانضمام</h1>
        <h1 class="form-title lang-en">Apply to Join</h1>

        <p class="form-subtitle lang-ar">
          املأ النموذج أدناه وسنتواصل معك عبر واتساب خلال أسبوع.<br>
          نستخدم بياناتك لأغراض التقديم والتواصل فقط.
        </p>
        <p class="form-subtitle lang-en">
          Fill out the form below and we’ll contact you via WhatsApp within a week.<br>
          We use your data only for application & communication purposes.
        </p>
      </div>

      <div class="form-embed">
        <!-- ✅ Loader فوق الفورم -->
        <div id="formLoader" class="form-loader" aria-live="polite">
          <div class="spinner" aria-hidden="true"></div>
          <p class="lang-ar">جاري تحميل النموذج…</p>
          <p class="lang-en">Loading the form…</p>
        </div>

        <iframe
          id="gForm"
          class="google-form-iframe"
          src="https://docs.google.com/forms/d/e/1FAIpQLScKF0Las-Epglvf5IRYePAatevkj-6FXXiHmIotyQvfgtzfyQ/viewform?embedded=true"
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          loading="lazy"
          title="Darb PATH Application Form">
        </iframe>
      </div>

      <div class="info-box">
        <h4 class="lang-ar">هل تحتاج مساعدة؟</h4>
        <h4 class="lang-en">Need Help?</h4>

        <!-- ✅ واتساب فقط -->
        <p class="lang-ar">
          إذا واجهت أي مشكلة في تعبئة النموذج، تواصل معنا عبر واتساب:
          <a href="https://wa.me/13187639149" target="_blank" rel="noopener">+1 (318) 763-9149</a>
        </p>
        <p class="lang-en">
          If you face any issues, contact us via WhatsApp:
          <a href="https://wa.me/13187639149" target="_blank" rel="noopener">+1 (318) 763-9149</a>
        </p>

        <a
          href="https://docs.google.com/forms/d/e/1FAIpQLScKF0Las-Epglvf5IRYePAatevkj-6FXXiHmIotyQvfgtzfyQ/viewform"
          target="_blank"
          rel="noopener"
          class="btn-open-form">
          <span class="lang-ar">افتح النموذج في صفحة جديدة</span>
          <span class="lang-en">Open Form in New Tab</span>
        </a>
      </div>

      <noscript>
        <div class="info-box" style="margin-top: 16px;">
          <p class="lang-ar">ملاحظة: تفعيل الجافاسكربت يساعد في عرض الصفحة بشكل أفضل.</p>
          <p class="lang-en">Note: Enabling JavaScript improves the page experience.</p>
        </div>
      </noscript>

    </div>
  </section>

  <footer>
    <div>
      <p class="lang-ar">© 2026 درب | Path — طريق واحد. ثقافات متعددة. لغة واحدة.</p>
      <p class="lang-en">© 2026 Path | درب — One Path. Many Cultures. One Language.</p>

      <p style="margin-top: 1em;">
        <a href="https://wa.me/13187639149" target="_blank" rel="noopener">WhatsApp</a>
      </p>
    </div>
  </footer>

  <script>
    function setLang(lang) {
      var body = document.body;
      var html = document.documentElement;
      var btnAr = document.getElementById('lang-ar');
      var btnEn = document.getElementById('lang-en');

      if (lang === 'en') {
        body.classList.add('en-mode');
        html.setAttribute('dir', 'ltr');
        html.setAttribute('lang', 'en');
        btnEn.classList.add('active');
        btnAr.classList.remove('active');
        localStorage.setItem('lang', 'en');
      } else {
        body.classList.remove('en-mode');
        html.setAttribute('dir', 'rtl');
        html.setAttribute('lang', 'ar');
        btnAr.classList.add('active');
        btnEn.classList.remove('active');
        localStorage.setItem('lang', 'ar');
      }
    }

    window.addEventListener('DOMContentLoaded', function() {
      var savedLang = localStorage.getItem('lang') || 'ar';
      setLang(savedLang);

      // ✅ إخفاء اللودر لما iframe يحمل
      var iframe = document.getElementById('gForm');
      var loader = document.getElementById('formLoader');

      iframe.addEventListener('load', function() {
        loader.classList.add('hidden');
        // نتركه موجود شوي (opacity) ثم نخفيه فعليًا
        setTimeout(function(){ loader.style.display = 'none'; }, 250);
      });

      // ✅ لو التحميل طول (شبكة/متصفح) نعطي تلميح
      setTimeout(function(){
        if (loader && loader.style.display !== 'none') {
          // ما نغيّر النص كثير، بس تلميح
          // (الزر موجود تحت أصلاً)
        }
      }, 10000);
    });
  </script>

</body>
</html>
